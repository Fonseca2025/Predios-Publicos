<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel de Locais P√∫blicos - Montes Claros</title>
    <!-- Usando Bootstrap para design r√°pido e limpo -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- √çcones -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <style>
        body { background-color: #f8f9fa; }
        .card-header { font-weight: bold; text-transform: uppercase; }
        .badge-dept { font-size: 0.8em; }
        .table-hover tbody tr:hover { background-color: #e9ecef; cursor: pointer; }
        .search-box { box-shadow: 0 4px 6px rgba(0,0,0,0.1); border: none; padding: 15px; }
    </style>
</head>
<body>

<div class="container py-5">
    <div class="text-center mb-5">
        <h1 class="display-6 fw-bold text-primary">üìç Locais P√∫blicos Municipais</h1>
        <p class="text-muted">Consulta r√°pida de Escolas, Postos de Sa√∫de e Reparti√ß√µes</p>
    </div>

    <!-- Filtros -->
    <div class="row g-3 mb-4">
        <div class="col-md-8">
            <input type="text" id="searchInput" class="form-control search-box" placeholder="üîé Digite o nome do local, rua ou bairro...">
        </div>
        <div class="col-md-4">
            <select id="deptFilter" class="form-select search-box" style="height: 100%;">
                <option value="">üè¢ Todas as Secretarias</option>
                <!-- Op√ß√µes ser√£o preenchidas via JS -->
            </select>
        </div>
    </div>

    <!-- Contador -->
    <div class="mb-3 text-end">
        <span class="badge bg-secondary" id="countBadge">Carregando dados...</span>
    </div>

    <!-- Tabela de Dados -->
    <div class="card shadow-sm border-0">
        <div class="card-body p-0">
            <div class="table-responsive">
                <table class="table table-hover table-striped mb-0 align-middle">
                    <thead class="table-dark">
                        <tr>
                            <th scope="col">Secretaria</th>
                            <th scope="col">Local / Unidade</th>
                            <th scope="col">Endere√ßo</th>
                            <th scope="col" class="text-center">A√ß√£o</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        <!-- Linhas ser√£o inseridas aqui via JS -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<script>
    // Dados consolidados do PDF (Amostra representativa e estruturada)
    const database = [
        // GABINETE
        { dept: "GABINETE", local: "PROCON", address: "RUA JUSTINO CAMARA, 93 - CENTRO" },
        
        // EDUCA√á√ÉO (Amostra)
        { dept: "EDUCA√á√ÉO", local: "E.M. SEBASTIAO MENDES", address: "AV PAULISTA, 1135 ALTO BOA VISTA" },
        { dept: "EDUCA√á√ÉO", local: "E.M. BOLIVAR DE ANDRADE", address: "RUA CECILIA MEIRELLES, 465 PLANALTO" },
        { dept: "EDUCA√á√ÉO", local: "E.M. MARIA DE LOURDES PINHEIRO", address: "RUA PORTUGAL, 141 INDEPENDENCIA" },
        { dept: "EDUCA√á√ÉO", local: "E.M. NEIDE MELO FRANCO", address: "RUA PEDRO RAMOS OLIVEIRA, 471 VILA ANALIA" },
        { dept: "EDUCA√á√ÉO", local: "E.M. DU NARCISO", address: "AV PERIMETRAL, 4001 VILAGE II" },
        { dept: "EDUCA√á√ÉO", local: "CEMEI S√ÉO JUDAS", address: "RUA PADRE VIEIRA, 447 S√ÉO JUDAS" },
        { dept: "EDUCA√á√ÉO", local: "CEMEI MANOEL CARIBE", address: "RUA PIO XII, 242 - S√ÉO JUDAS" },
        { dept: "EDUCA√á√ÉO", local: "CAIC MARACANA (DOMINGUINHOS PEREIRA)", address: "AV. QUELUZ S/N MARACANA" },
        
        // SA√öDE (Amostra)
        { dept: "SA√öDE", local: "CENTRO ZOONOSES LABORAT√ìRIO", address: "AV.ANT√îNIO LAFET√Å REBELLO N¬∫331-STA L√öCIA" },
        { dept: "SA√öDE", local: "FARMACIA DE TODOS", address: "AV. FLORIANO NEIVA S/N - S√ÉO JOAO" },
        { dept: "SA√öDE", local: "CAPS AD", address: "AV. DONATO QUINTINO N¬∫ 341 - CANELAS" },
        { dept: "SA√öDE", local: "POLICLINICA DR. ARIOSTO C. MACHADO I", address: "RUA NELSON ALKIMIN N¬∫ 120 - JARDIM ALVORADA" },
        { dept: "SA√öDE", local: "U.B.S. SANTOS REIS", address: "RUA GERALDINO MACHADO N¬∫677 - SANTOS REIS" },
        { dept: "SA√öDE", local: "ACADEMIA DE SAUDE DELFINO", address: "RUA DA FELICIDADE S/N¬∫ -DELFINO MAGALH√ÉES" },
        { dept: "SA√öDE", local: "CEREST - CENTRO REF TRABALHADOR", address: "RUA CASSIMIRO DE ABREU N¬∫ 76 C. CAMARA" },
        { dept: "SA√öDE", local: "CENTRO OFTAMOLOGICO GERALDO ATHAYDE", address: "AV. PAULISTA N¬∫ 446 - SANTO ANTONIO" },

        // SOCIAL
        { dept: "SOCIAL", local: "MERCADO CENTRAL CHRISTO RAEFF", address: "RUA MARECHAL DEODORO, 63 - CENTRO" },
        { dept: "SOCIAL", local: "CRAS JK - VILLAGE II", address: "AV ANTONIO DE FREITAS, S/N VILLAGE II" },
        { dept: "SOCIAL", local: "CRAS MARACANA", address: "AV BRASILIA, 538 MARACANA" },
        { dept: "SOCIAL", local: "CONSELHO TUTELAR", address: "RUA TIRADENTES, 465 - CENTRO" },
        { dept: "SOCIAL", local: "COORDENADORIA DO IDOSO", address: "RUA DOMINGOS PORTUGUES, 347 - VILA GUILHERMINA" },

        // MEIO AMBIENTE
        { dept: "MEIO AMBIENTE", local: "PARQUE MUNICIPAL MILTON PRATES", address: "AV: PEDRO AUGUSTO VELOSO N¬∫ 50 - MORADO DO PARQUE" },
        { dept: "MEIO AMBIENTE", local: "PARQUE DAS MANGUEIRAS", address: "RUA GUAPOR√â N¬∞ 70 B - JO√ÉO BOTELHO" },
        { dept: "MEIO AMBIENTE", local: "PARQUE SAPUCAIA", address: "RUA COLOMBIA S/N - SAPUCAIA" },

        // SERVI√áOS URBANOS
        { dept: "SERV. URBANOS", local: "CEMIT√âRIO", address: "AV: BRASIL S/N - REGINA PEREZ" },
        { dept: "SERV. URBANOS", local: "MERCADO CENTRAL (APOIO)", address: "RUA: MARECHAL DEODORO N¬∫ 63 - CENTRO" },
        { dept: "SERV. URBANOS", local: "USINA DE VIDROS", address: "RUA: DOMINGOS GON√áALVES FREITAS N¬∫ 20 - RENASCEN√áA" },

        // ESPORTE
        { dept: "ESPORTE", local: "GINASIO ANA LOPES", address: "AV: PE AUGUSTO VELOSO, 39 - MORADA DO PARQUE" },
        { dept: "ESPORTE", local: "PRA√áA DE ESPORTES", address: "AV: OSVALDO CRUZ N¬∫311 - CENTRO" },

        // CULTURA
        { dept: "CULTURA", local: "SECRETARIA DE CULTURA", address: "RUA: CORONEL CELESTINO N¬∫ 99 - CENTRO" },
        { dept: "CULTURA", local: "CENTRO CULTURAL HERMES DE PAULA", address: "RUA: PRA√áA DOUTOR CHAVES, N¬∫ 32 - CENTRO" },
        
        // AGRICULTURA
        { dept: "AGRICULTURA", local: "CEANORTE", address: "AV: CEANORTE N¬∫ 3597 - VILA TELMA" }
    ];

    const tableBody = document.getElementById('tableBody');
    const searchInput = document.getElementById('searchInput');
    const deptFilter = document.getElementById('deptFilter');
    const countBadge = document.getElementById('countBadge');

    // Inicializar Filtro de Secretarias
    function initFilters() {
        const depts = [...new Set(database.map(item => item.dept))];
        depts.sort();
        depts.forEach(d => {
            const option = document.createElement('option');
            option.value = d;
            option.textContent = d;
            deptFilter.appendChild(option);
        });
    }

    // Fun√ß√£o de Renderiza√ß√£o
    function renderTable(data) {
        tableBody.innerHTML = "";
        countBadge.textContent = `${data.length} locais encontrados`;

        if (data.length === 0) {
            tableBody.innerHTML = `<tr><td colspan="4" class="text-center py-4 text-muted">Nenhum local encontrado.</td></tr>`;
            return;
        }

        data.forEach(item => {
            // Define cor da badge baseada no departamento
            let badgeColor = "bg-secondary";
            if(item.dept.includes("EDUCA√á√ÉO")) badgeColor = "bg-primary";
            if(item.dept.includes("SA√öDE")) badgeColor = "bg-success";
            if(item.dept.includes("SOCIAL")) badgeColor = "bg-warning text-dark";
            
            // Link do Google Maps
            const mapQuery = encodeURIComponent(`${item.address}, Montes Claros, MG`);
            const mapLink = `https://www.google.com/maps/search/?api=1&query=${mapQuery}`;

            const row = `
                <tr>
                    <td><span class="badge ${badgeColor} badge-dept">${item.dept}</span></td>
                    <td class="fw-bold">${item.local}</td>
                    <td class="text-muted small"><i class="bi bi-geo-alt-fill text-danger"></i> ${item.address}</td>
                    <td class="text-center">
                        <a href="${mapLink}" target="_blank" class="btn btn-sm btn-outline-primary" title="Abrir no Mapa">
                            <i class="bi bi-map"></i> Mapa
                        </a>
                    </td>
                </tr>
            `;
            tableBody.innerHTML += row;
        });
    }

    // L√≥gica de Filtro
    function filterData() {
        const searchTerm = searchInput.value.toLowerCase();
        const deptValue = deptFilter.value;

        const filtered = database.filter(item => {
            const matchesSearch = item.local.toLowerCase().includes(searchTerm) || 
                                  item.address.toLowerCase().includes(searchTerm);
            const matchesDept = deptValue === "" || item.dept === deptValue;
            return matchesSearch && matchesDept;
        });

        renderTable(filtered);
    }

    // Event Listeners
    searchInput.addEventListener('input', filterData);
    deptFilter.addEventListener('change', filterData);

    // Inicializa√ß√£o
    initFilters();
    renderTable(database);

</script>

</body>
</html>
