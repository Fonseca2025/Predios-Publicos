<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Educação Montes Claros - 88 Unidades</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Ícones -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        body { background-color: #f0f2f5; font-family: 'Segoe UI', sans-serif; }
        .card-dash { border: none; border-radius: 12px; box-shadow: 0 2px 12px rgba(0,0,0,0.06); transition: all 0.3s; }
        .card-dash:hover { transform: translateY(-5px); box-shadow: 0 8px 15px rgba(0,0,0,0.1); }
        .icon-shape { width: 50px; height: 50px; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; }
        .bg-blue { background-color: #e3f2fd; color: #0d6efd; }
        .bg-green { background-color: #e8f5e9; color: #198754; }
        .bg-orange { background-color: #fff3e0; color: #fd7e14; }
        .table-hover tbody tr:hover { background-color: #e8f4fd; cursor: pointer; }
        .badge-id { width: 40px; }
    </style>
</head>
<body>

<div class="container py-4">
    <!-- Título -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h2 class="fw-bold text-dark"><i class="bi bi-mortarboard-fill text-primary"></i> Rede Municipal de Ensino</h2>
            <p class="text-muted mb-0">Mapeamento Oficial - 88 Unidades Escolares e Administrativas</p>
        </div>
        <button class="btn btn-outline-primary" onclick="window.print()"><i class="bi bi-printer"></i> Imprimir</button>
    </div>

    <!-- Cards KPI -->
    <div class="row g-3 mb-4">
        <div class="col-md-3">
            <div class="card card-dash h-100 p-3">
                <div class="d-flex align-items-center">
                    <div class="icon-shape bg-dark text-white"><i class="bi bi-buildings"></i></div>
                    <div class="ms-3">
                        <p class="text-muted mb-0 small fw-bold">TOTAL GERAL</p>
                        <h3 class="fw-bold mb-0" id="totalGeral">88</h3>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card card-dash h-100 p-3">
                <div class="d-flex align-items-center">
                    <div class="icon-shape bg-blue"><i class="bi bi-book"></i></div>
                    <div class="ms-3">
                        <p class="text-muted mb-0 small fw-bold">ESCOLAS (E.M.)</p>
                        <h3 class="fw-bold mb-0" id="totalEM">0</h3>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card card-dash h-100 p-3">
                <div class="d-flex align-items-center">
                    <div class="icon-shape bg-green"><i class="bi bi-emoji-smile"></i></div>
                    <div class="ms-3">
                        <p class="text-muted mb-0 small fw-bold">CEMEIs</p>
                        <h3 class="fw-bold mb-0" id="totalCEMEI">0</h3>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card card-dash h-100 p-3">
                <div class="d-flex align-items-center">
                    <div class="icon-shape bg-orange"><i class="bi bi-grid"></i></div>
                    <div class="ms-3">
                        <p class="text-muted mb-0 small fw-bold">OUTROS / ANEXOS</p>
                        <h3 class="fw-bold mb-0" id="totalOutros">0</h3>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Gráfico e Busca -->
    <div class="row g-3 mb-4">
        <div class="col-md-8">
            <div class="card card-dash h-100">
                <div class="card-header bg-white border-0 py-3">
                    <h5 class="fw-bold mb-0">Localizar Unidade</h5>
                </div>
                <div class="card-body">
                    <div class="input-group mb-3">
                        <span class="input-group-text bg-light border-end-0"><i class="bi bi-search"></i></span>
                        <input type="text" id="searchInput" class="form-control border-start-0 bg-light" placeholder="Digite o nome da escola, rua ou bairro...">
                    </div>
                    <div class="alert alert-info py-2 small">
                        <i class="bi bi-info-circle"></i> Dica: Clique no botão de mapa para abrir a localização no Google Maps.
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card card-dash h-100">
                <div class="card-body">
                    <h6 class="text-center fw-bold text-muted">Distribuição da Rede</h6>
                    <div style="height: 150px;">
                        <canvas id="chartTipos"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Tabela Completa -->
    <div class="card card-dash">
        <div class="card-body p-0">
            <div class="table-responsive">
                <table class="table table-hover mb-0 align-middle">
                    <thead class="table-light">
                        <tr>
                            <th class="ps-4">ID</th>
                            <th>Tipo</th>
                            <th>Nome da Unidade</th>
                            <th>Endereço Completo</th>
                            <th class="text-center">Mapa</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        <!-- JS Renderiza aqui -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<script>
    // === BASE DE DADOS COMPLETA (1 A 88) ===
    const database = [
        { id: 1, nome: "E.M. SEBASTIAO MENDES - ALTO BOA VISTA", end: "AV PAULISTA, 1135 ALTO BOA VISTA" },
        { id: 2, nome: "E.M. BOLIVAR DE ANDRADE - PLANALTO", end: "RUA CECILIA MEIRELLES, 465 PLANALTO" },
        { id: 3, nome: "E.M. MARIA DE LOURDES PINHEIRO", end: "RUA PORTUGAL, 141 INDEPENDENCIA" },
        { id: 4, nome: "E.M.MAURA LUCIA DOS SANTOS", end: "RUA ESPANHA Nº140 INDEPENDENCIA" },
        { id: 5, nome: "E.M. NEIDE MELO FRANCO - VILA ANALIA", end: "RUA PEDRO RAMOS OLIVEIRA, 471 VILA ANALIA" },
        { id: 6, nome: "E.M. DU NARCISO - VIGILLAGE II", end: "AV PERIMETRAL, 4001 VILAGE II" },
        { id: 7, nome: "E.M. ALFREDO COUTINHO- MAJOR PRATES", end: "RUA SINVAL FROES, 263 CAMILO PRATES" },
        { id: 8, nome: "E.M. CELESTINO PEREIRA SALGADO -JD PRIMAVERA", end: "RUA 19, 150 - JARDIM PRIMAVERA" },
        { id: 9, nome: "E.M. AFONSO SALGADO", end: "RUA ANTONIO LOPES DA SILVA, 712 - VILA ATLANTIDA" },
        { id: 10, nome: "E.M. GERALDO PEREIRA SOUZA", end: "RUA JOSEFINA CHAVES, S/N - SANTA LUCIA II" },
        { id: 11, nome: "E.M. PROFESSORA EUNICE CARNEIRO", end: "RUA D, 300- JOSE CORREA MACHADO" },
        { id: 12, nome: "E.M. HILDA CARVALHO MENDES", end: "RUA ARGENTINA, 395 DR JOAO ALVES" },
        { id: 13, nome: "E.M.DR. JOAO VALE MAURICIO", end: "AV PERIMETRAL, 2300 - VILAGE I" },
        { id: 14, nome: "E.M.ROZENDA ZANES", end: "RUA D, 115 JARDIM PLANALTO" },
        { id: 15, nome: "E.M. MARIA SIMONE SOARES", end: "RUA ESPIRITO SANTO, 811 - ESPLANADA" },
        { id: 16, nome: "E.M. JAIR DE OLIVEIRA", end: "RUA CELESTINO PEREIRA, 320 - JARDIM ELDORADO" },
        { id: 17, nome: "E.M. EGIDIO CORDEIRO AQUINO", end: "AV:ALAMEDA DAS AMERICAS, 580 INDEPENDENCIA" },
        { id: 18, nome: "E.M. ALCIDES CARVALHO", end: "RUA DERMEVAL CAMPOS, 263 V. CRUZ" },
        { id: 19, nome: "EM JOSE JOAQUIM DE AZEVEDO(CAIC AMERICO SOUTO)", end: "RUA PENIEL, 314 - RAUL JOSE PEREIRA" },
        { id: 20, nome: "E.M. DONA VIDINHA PIRES", end: "RUA CRISANTINO ALMEIDA BOREM, 55 - VARGEM GRANDE" },
        { id: 21, nome: "E.M. ZIZINHA RIBEIRO", end: "RUA TRINTA E CINCO, 805 - SANTO AMARO" },
        { id: 22, nome: "E.M. ROTARY SÃO LUIZ", end: "RUA QUARENTA E CINCO, 385, CIDADE INDUSTRIAL" },
        { id: 23, nome: "E.M. DR MÁRIO RIBEIRO TOURINHO", end: "AV AMPERE, 27, LOURDES" },
        { id: 24, nome: "DOMINGUINHOS PEREIRA(CAIC MARACANA)", end: "AV. QUELUZ S/N MARACANA" },
        { id: 25, nome: "E.M. MESTRA FININHA", end: "RUA \"D\" 350 CIRO DOS ANJOS" },
        { id: 26, nome: "E.M.JASON CAETANO I", end: "RUA GERALDO BATISTA NUNES 30 SANTO ANTONIO" },
        { id: 27, nome: "E.M.JASON CAETANO II", end: "AV.LAURO DIAS DE SÁ Nº369 ST ANTONIO" },
        { id: 28, nome: "E.M.CRISANTINO BOREM", end: "RUA GUARANI, 375 NSA SRA GRACAS" },
        { id: 29, nome: "E.M.RUY LAGE", end: "RUA: J, 155 - PLANALTO 2" },
        { id: 30, nome: "E.M.IRMA BEATA", end: "RUA CINCO Nº158 CHIQUINHO GUIMARAES" },
        { id: 31, nome: "E.M. PROFª SÔNIA DE QUADROS", end: "RUA:FRANCISCO COUTINHO,457 AGUSTA MOTA" },
        { id: 32, nome: "E.M.EUNICE CARNEIRO", end: "RUA: D Nº 300- CONJ.JOSE CORREA MACHADO" },
        { id: 33, nome: "E.M.PROFª EVA FAGUNDES", end: "RUA:BUNGANVILAS,Nº200- RESID.VITÓRIA" },
        { id: 34, nome: "E.M LAUDELINA FONSECA", end: "RUA: H Nº67 -JARDIM ALEGRE" },
        { id: 35, nome: "E.M.YARA SOUTO", end: "RUA:DONA TIBURTINA,EM FRENTE AO MURO 878-CENTRO" },
        { id: 36, nome: "CEMEI SÃO JUDAS", end: "RUA PADRE VIEIRA, 447 SÃO JUDAS" },
        { id: 37, nome: "CEMEI MANOEL CARIBE - SÃO JUDAS", end: "RUA GENTIL GONZAGA,201-CANELAS" },
        { id: 38, nome: "CEMEI HAMILTON LOPES - SÃO JOAO", end: "AV FLORIANO NEIVA, 133 - SÃO JOAO" },
        { id: 39, nome: "CEMEI ELOIN LOPES SOUZA - VILAGE I", end: "RUA: RUI DE ALBUQUERQUE Nº2.300-VILAGE DO LAGO I" },
        { id: 40, nome: "CEMEI SÃO MARCOS - VILA ANALIA", end: "RUA A, 112 - VILA ANALIA" },
        { id: 41, nome: "CEMEI RUTH TUPINAMBA-", end: "RUA GENERAL CARNEIRO,485 -Centro" },
        { id: 42, nome: "CEMEI PE. ADERBAL - VERA CRUZ", end: "RUA DERMEVAL CAMPOS, 483 - VERA CRUZ" },
        { id: 43, nome: "CEMEI PAULO FREIRE", end: "RUA O, 67 - VILAGE II" },
        { id: 44, nome: "CEMEI AMIGUINHOS DA VILA", end: "RUA 1º CENTENARIO, 17 -C.CAMARA" },
        { id: 45, nome: "CEMEI LUIZINHA GONCALVES", end: "RUA MAJOR SANTOS 442 V. ATLANTICA" },
        { id: 46, nome: "CEMEI PROF. MARIA CONC. COSTA", end: "RUA MONTE PLANO, 834 - CINTRA" },
        { id: 47, nome: "CEMEI PROF MARIA DORES RODRIGUES", end: "RUA 7 SETEMBRO S/N JOSE CORREA MACHADO" },
        { id: 48, nome: "CEMEI D. IVONE SILVEIRA", end: "RUA ENOR DE BRITO ,100 -MORADA SOL" },
        { id: 49, nome: "CEMEI MAJOR PRATES", end: "RUA LAURA PRATES, 54 M. PRATES" },
        { id: 50, nome: "CEMEI MONTEIRO LOBATO", end: "RUA DA DEMOCRACIA, 551 ALTEROSA" },
        { id: 51, nome: "CEMEI AMIGUINHOS DE JESUS", end: "AV LEONEL BEIRAO, 3317 - V. TELMA" },
        { id: 52, nome: "CEMEI Mª DE LOURDES ANTONIO PIMENTA(NOSSO LAR)", end: "RUA MARCOS PLINIO RIBEIRO, 202 SÃO JUDAS" },
        { id: 53, nome: "CEMEI PROF ANA LUCIA MOTA (ANEXO)", end: "AV: INDEPENDÊNCIA, Nº4688 INDEPENDÊNCIA" },
        { id: 54, nome: "CEMEI PROF ELIZABETH SOARES", end: "AL.QUINTA DAS AMERICAS 71-Acácias" },
        { id: 55, nome: "CEMEI SÃO NORBERTO", end: "RUA ANTONIO FIGUEIREDO, 200 VILA OLIVEIRA" },
        { id: 56, nome: "CEMEI PROF IDOLETA MACIEL", end: "RUA MANOEL JOSE DA SILVA Nº438 STO ANTONIO I" },
        { id: 57, nome: "CEMEI AMIGUINHOS DO ADELOUR", end: "RUA GEOVANE SOARES DA CRUZ, 609 BAIRRO DE LOURDES" },
        { id: 58, nome: "CEMEI ANINHA RIBEIRO", end: "AV:FRANCISCO RIBEIRO,S/N VILA EXPOSIÇÃO" },
        { id: 59, nome: "CEMEI SANTO AMARO", end: "RUA TRINTA E SEIS, S/N - SANTO AMARO" },
        { id: 60, nome: "CEMEI CASINHA FELIZ", end: "RUA ABEL SENA, 402 J. EDLDORADO" },
        { id: 61, nome: "CEMEI DR MÁRIO RIBEIRO", end: "AV. PLANETÁRIA, 138, CIDADE INDUSTRIAL" },
        { id: 62, nome: "CEMEI NOVA VIDA", end: "AV JOÃO XXIII, 2015, STOS REIS" },
        { id: 63, nome: "CEMEI CANACY", end: "RUA : D, 173, VILA ATLANTIDA" },
        { id: 64, nome: "CEMEI MADRE PAULA ELIZABETH", end: "RUA SÃO JOÃO, 1400, T.SANTOS" },
        { id: 65, nome: "CEMEI NOSSA SRA CONCEIÇÃO", end: "RUA GERALDINO MACHADO, 677, VILA AUREA" },
        { id: 66, nome: "CEMEI DR IVAN LOPES", end: "RUA SÃO MARCELINO,Nº36 JD BRASIL" },
        { id: 67, nome: "CEMEI O BOM SAMARITANO", end: "RUA SEIS, Nº65 - SANTA LUCIA" },
        { id: 68, nome: "CEMEI ALEGRIA DE VIVER", end: "RUA ADAO GOMES FERREIRA, 884 RENASCENSA" },
        { id: 69, nome: "CEMEI BRANCA DE NEVE", end: "PÇA DA IGREJA, 85 SÃO GERALDO" },
        { id: 70, nome: "CEMEI MUNDO DA CRIANCA", end: "AV. QUELUZ S/N MARACANA" },
        { id: 71, nome: "CEMEI SOLAR DE JESUS", end: "AV. CORAÇÃO DE JESUS Nº1645 SÃO GERALDO I" },
        { id: 72, nome: "CEMEI CRISTO REI", end: "RUA ELIS CHAMONE 380 CRISTO REI" },
        { id: 73, nome: "CEMEI SÃO FRANCISCO DE ASSIS", end: "RUA DO ACESSO Nº113 SÃO FRANCISCO DE ASSIS" },
        { id: 74, nome: "CEMEI DEP ANTONIO PIMENTA", end: "RUA MONTE PLANO S/Nº SANTA RITA" },
        { id: 75, nome: "CEMEI SANTA RAFAELA", end: "RUA FIRMINO FERREIRA, 53 STA RAFAELA" },
        { id: 76, nome: "CEMEI MEI MEI", end: "RUA PROFESSORA MARIA MACHADO, 297 SANTA RITA" },
        { id: 77, nome: "CEMEI ROSITA AQUINO (MONTE SIAO)", end: "RUA E Nº39 MONTE SIÃO IV" },
        { id: 78, nome: "CENTRO DE CONVIVIO CURIMIM", end: "AV 1, S/N - VILA ANALIA" },
        { id: 79, nome: "CEMEI PROF. HELOISA VELOSO ANJOS", end: "RUA: BENJAMIN DOS ANJOS Nº400 - MELO" },
        { id: 80, nome: "CEMEI CIDA CHELONE", end: "RUA VIUVA PACULDINO, 621- JARAGUA II" },
        { id: 81, nome: "CEMEI PROF RAIMUNDO NETO", end: "RUA: DOIS,159 -CHIQUINHO GUIMARAES" },
        { id: 82, nome: "CEMEI PROF Mª DE LOURDES", end: "RUA M ,205-NOVA AMÉRICA" },
        { id: 83, nome: "CEMEI VALDEIR C.MACHADO", end: "AV:F ,Nº461 -JARDIM PRIMAVERA" },
        { id: 84, nome: "CEMEI SÃO NORBERTO ANEXO", end: "RUA MARIA DA CONCEIÇÃO OLIVEIRA Nº55 - VILA OLIVEIRA" },
        { id: 85, nome: "CEMEI PROF LUCIA PIMENTA MAGALHAES", end: "AV:NECO DELFINO ,571-DELFINO MAGALHAES" },
        { id: 86, nome: "CEMEI PROFª ANA LUCIA MOTA", end: "RUA LAGOA CUMPRIDA 685 - CARMELO" },
        { id: 87, nome: "ALMOXARIFADO", end: "RUA CARLOS PAULINO CARDOSO, 401 VILA EXPOSICAO" },
        { id: 88, nome: "CAIC AMERICO SOUTO (AUDITORIO)", end: "AV PRINCIPAL, 314 - VILA EXPOSICAO" }
    ];

    // === LÓGICA DE CÁLCULO ===
    const totalGeral = database.length;
    const totalEM = database.filter(i => i.nome.includes("E.M.") || i.nome.includes("EM ")).length;
    const totalCEMEI = database.filter(i => i.nome.includes("CEMEI")).length;
    const totalOutros = totalGeral - totalEM - totalCEMEI;

    document.getElementById('totalEM').innerText = totalEM;
    document.getElementById('totalCEMEI').innerText = totalCEMEI;
    document.getElementById('totalOutros').innerText = totalOutros;

    // === GRÁFICO ===
    const ctx = document.getElementById('chartTipos').getContext('2d');
    new Chart(ctx, {
        type: 'doughnut',
        data: {
            labels: ['Escolas (E.M.)', 'CEMEIs', 'Outros/Anexos'],
            datasets: [{
                data: [totalEM, totalCEMEI, totalOutros],
                backgroundColor: ['#0d6efd', '#198754', '#fd7e14'],
                borderWidth: 0,
                hoverOffset: 4
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: { position: 'right', labels: { boxWidth: 12 } }
            },
            cutout: '65%'
        }
    });

    // === RENDERIZAÇÃO DA TABELA ===
    const tableBody = document.getElementById('tableBody');
    const searchInput = document.getElementById('searchInput');

    function renderTable(data) {
        tableBody.innerHTML = "";
        
        if (data.length === 0) {
            tableBody.innerHTML = "<tr><td colspan='5' class='text-center py-4 text-muted'>Nenhuma unidade encontrada.</td></tr>";
            return;
        }

        data.forEach(item => {
            // Definição de Tipos para Badge
            let typeBadge = '<span class="badge bg-secondary">Outros</span>';
            if (item.nome.includes("E.M.") || item.nome.includes("EM ")) typeBadge = '<span class="badge bg-blue">Escola</span>';
            if (item.nome.includes("CEMEI")) typeBadge = '<span class="badge bg-green">CEMEI</span>';

            // Link do Maps
            const query = encodeURIComponent(item.end + ", Montes Claros, MG");
            const mapLink = `https://www.google.com/maps/search/?api=1&query=${query}`;

            const row = `
                <tr>
                    <td class="ps-4 text-muted fw-bold badge-id">${item.id}</td>
                    <td>${typeBadge}</td>
                    <td class="fw-bold text-dark">${item.nome}</td>
                    <td class="text-muted small"><i class="bi bi-geo-alt-fill text-danger me-1"></i>${item.end}</td>
                    <td class="text-center">
                        <a href="${mapLink}" target="_blank" class="btn btn-sm btn-outline-primary" title="Ver no Google Maps">
                            <i class="bi bi-map"></i>
                        </a>
                    </td>
                </tr>
            `;
            tableBody.innerHTML += row;
        });
    }

    // Filtro
    searchInput.addEventListener('input', (e) => {
        const term = e.target.value.toLowerCase();
        const filtered = database.filter(item => 
            item.nome.toLowerCase().includes(term) || 
            item.end.toLowerCase().includes(term) ||
            item.id.toString().includes(term)
        );
        renderTable(filtered);
    });

    // Iniciar
    renderTable(database);

</script>

</body>
</html>
